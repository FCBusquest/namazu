<!DOCTYPE html>


<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="alternate" href="/index.xml" type="application/rss+xml" title="Namazu">
		
		<title>Release Namazu v0.2.0 - Namazu</title>
		
		<link rel="stylesheet" href="http://osrg.github.io/namazu//css/highlight.js.min.css">
		<link rel="stylesheet" href="http://osrg.github.io/namazu//css/bootstrap.min.css">
		<link rel="stylesheet" href="http://osrg.github.io/namazu//css/bootstrap-theme.css">
		<link rel="stylesheet" href="http://osrg.github.io/namazu//css/theme.css">
		<link rel="stylesheet" href="http://osrg.github.io/namazu//css/bootie-docs.css">
	</head>

<body role="document">

	
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="http://osrg.github.io/namazu//">Namazu</a>
			</div>
			<div id="navbar" class="navbar-collapse collapse">
				<ul class="nav navbar-nav">
					<li ><a href="http://osrg.github.io/namazu//">Home</a></li>
			
				
				
					
					<li ><a href="http://osrg.github.io/namazu//about">About</a></li>
				
					
					<li ><a href="http://osrg.github.io/namazu//gettingStarted">GettingStarted</a></li>
				
					
					<li ><a href="http://osrg.github.io/namazu//categories/blog">Blog</a></li>
				
			
				
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Categories<span class="caret"></span></a>
						<ul class="dropdown-menu" role="menu">
						
							<li><a href="http://osrg.github.io/namazu//categories/blog">Blog</a></li>
						
							<li><a href="http://osrg.github.io/namazu//categories/general">General</a></li>
						
						</ul>
					</li>
				
				
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Tags<span class="caret"></span></a>
						<ul class="dropdown-menu" role="menu">
						
							<li><a href="http://osrg.github.io/namazu//tags/document">Document</a></li>
						
							<li><a href="http://osrg.github.io/namazu//tags/found-bug">Found-Bug</a></li>
						
							<li><a href="http://osrg.github.io/namazu//tags/reproduced-bug">Reproduced-Bug</a></li>
						
							<li><a href="http://osrg.github.io/namazu//tags/zookeeper">Zookeeper</a></li>
						
						</ul>
					</li>
				
				</ul>
			</div>
		</div>
	</nav>

<div class="container">


<div class="row">
	<div class="col-sm-9 doc-main">
		<main role="main">
			<article>
				<a id="title"></a>
				<h1 class="doc-entry-title">Release Namazu v0.2.0</h1>
				<div class="doc-entry-meta">
					<span><time datetime="2016-05-20">May 20, 2016</time></span>
				</div>
				<section>
					

<p>Note: we recently renamed <em>Earthquake</em> to <em>Namazu</em>.</p>

<p>We are glad to annouce the release of <a href="https://github.com/osrg/namazu">Namazu</a> v0.2.0.</p>

<p><img src="https://raw.githubusercontent.com/osrg/namazu/05e3fb5343e708990fd7132416678d339df59438/doc/img/namazu.png" alt="Overview" /></p>

<p>Namazu v0.2.0 includes many new features: Process inspector, Filesystem inspector, Container CLI, Semi-deterministic replaying API&hellip;</p>

<p>These new features made Namazu much more powerful and simple.
Now, no configuration is needed to get started with Namazu.</p>

<p>You can download the Namazu v0.2.0 binary release from <a href="https://github.com/osrg/namazu/releases/tag/v0.2.0">github</a>.</p>

<p>Or you can also build Namazu manually:</p>

<pre><code>$ sudo apt-get install libzmq3-dev libnetfilter-queue-dev
$ go get github.com/osrg/namazu/nmz
</code></pre>

<h2 id="new-features">New features</h2>

<h3 id="process-inspector">Process inspector</h3>

<p>The process inspector sets random scheduling priority to threads under a specific Linux process:</p>

<pre><code>$ sudo nmz inspectors proc -pid $TARGET_PID -watch-interval 1s
</code></pre>

<p>The process inspector is sometimes useful when you want to reproduce flaky xUnit tests.</p>

<p>The experimental result for Hadoop tests is available in the slide we presented at ApacheCon:

<iframe src="//www.slideshare.net/slideshow/embed_code/key/esat324HuI0vud?startSlide=41" width="595" height="485" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe>

</p>

<h3 id="filesystem-inspector">Filesystem inspector</h3>

<p>The filesystem inspector provides randomized scheduling and fault injection for filesystem using FUSE:</p>

<pre><code>$ mkdir /tmp/{nmzfs-orig,nmzfs}
$ sudo nmz inspectors fs -original-dir /tmp/nmzfs-orig -mount-point /tmp/nmzfs -autopilot config.toml
$ $TARGET_PROGRAM_WHICH_ACCESSES_TMP_NMZFS
$ sudo fusermount -u /tmp/nmzfs
</code></pre>

<p>Using filesystem inspector, we successfully found <a href="https://issues.apache.org/jira/browse/YARN-4301">YARN-4301</a>.</p>


<iframe src="//www.slideshare.net/slideshow/embed_code/key/esat324HuI0vud?startSlide=55" width="595" height="485" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe>



<h3 id="container-cli">Container CLI</h3>

<p>We introduced <em>Namazu Container</em>, a new human-friendly, Docker-like CLI:</p>

<pre><code>$ sudo nmz container run -it --rm -v /foo:/foo ubuntu bash
</code></pre>

<p>In <em>Namazu Container</em>, you can run arbitrary command that might be <em>flaky</em>.
JUnit tests are interesting to try.</p>

<pre><code>nmzc$ git clone something
nmzc$ cd something
nmzc$ for f in $(seq 1 1000);do mvn test; done
</code></pre>

<p>By default, only process inspector is enabled in <em>Namazu Container</em>.
Please refer to <a href="https://github.com/osrg/namazu/blob/master/README.md">README file</a> for configuration.</p>

<h3 id="semi-deterministic-replaying-api">Semi-deterministic replaying API</h3>

<p>Semi-deterministic replayer is an experimental feature:
it determines a delay for an event using a seed value and the hash of the event, rather than just using a random value.</p>

<p>It does not guarantee full determinism, but we believe it is sometimes enough for debugging.</p>


<iframe src="//www.slideshare.net/slideshow/embed_code/key/esat324HuI0vud?startSlide=58" width="595" height="485" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe>



<h3 id="miscellaneous-improvements">Miscellaneous improvements</h3>

<ul>
<li>Renamed Earthquake to Namazu, and introduced a logo image</li>
<li>Support static build</li>
<li>Unit tests for Namazu itself</li>
</ul>

<h2 id="talks">Talks</h2>

<p>Recently, we made presentations at two events: <a href="http://sched.co/6Szb">CoreOS Fest</a> (May 10) and <a href="http://sched.co/6OJU">ApacheCon Core NA</a> (May 12).</p>

<p>Please refer to the <a href="/namazu/post/coreosfest2016-and-apachecon2016/">article</a> in our blog.</p>

				</section>
			</article>
		</main>

		<div id="disqus_thread"></div>
		<script type="text/javascript">
		   
		  var disqus_shortname = 'osrg-earthquake';
		  
		   
		  (function() {
		  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		  })();
		</script>
		<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
		
	</div> 
        
<div class="col-sm-3 col-sm-offset-0 doc-sidebar">
  <div class="sidebar-module">
    <h4><a href="http://osrg.github.io/namazu//post">Recent Posts</a></h4>
    <ul>
      
      <li><a href="/namazu/post/release-0-2-1/">Release Namazu v0.2.1, with Namazu Swarm v0.0.1!(2016-09-05)</a></li>
      
      <li><a href="/namazu/post/release-0-2-0/">Release Namazu v0.2.0(2016-05-20)</a></li>
      
      <li><a href="/namazu/post/coreosfest2016-and-apachecon2016/">CoreOS Fest &amp; ApacheCon: Thank you for attending our presentations!(2016-05-20)</a></li>
      
      <li><a href="/namazu/post/fosdem2016/">FOSDEM: Thank you for attending our presentation!(2016-02-05)</a></li>
      
      <li><a href="/namazu/post/zookeeper-2080/">ZOOKEEPER-2080: flaky JUnit test(2015-10-02)</a></li>
      
    </ul>
  </div>
  <div class="sidebar-module">
    <div id="twitter-timeline-container">
      <a class="twitter-timeline" data-dnt="true" href="https://twitter.com/NamazuFuzzTest" data-widget-id="608816516100837376" width="180">Tweets by @NamazuFuzzTest</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>
  </div>  
</div>


</div> 


<hr />

<div class="row">
	<div class="col-sm-2 col-sm-offset-10">
		<p class="doc-footer-em"><a href="#">Back to TOP</a></p>
	</div>
</div>

</div> 

<footer class="doc-footer">
	<p class="doc-footer-em">Browse <strong><a href="https://github.com/osrg/namazu/">Repository</a></strong></p>
	<p>CopyrightÂ© 2015 Nippon Telegraph and Telephone Corporation</p>
	<p>Powered by <strong><a href="https://github.com/key-amb/hugo-theme-bootie-docs">Bootie Docs</a></strong> - theme for <a href="http://gohugo.io/">Hugo</a> by <a href="https://github.com/key-amb/">key-amb</a>.</p>
</footer>



<script src="http://osrg.github.io/namazu//js/jquery-1.11.2.min.js"></script>
<script src="http://osrg.github.io/namazu//js/bootstrap.min.js"></script>

<script src="http://osrg.github.io/namazu//js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="http://osrg.github.io/namazu//js/ie10-viewport-bug-workaround.js"></script>

</body>
</html>

